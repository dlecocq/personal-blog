---
layout: post
status: publish
published: true
title: Error Macro Win
author:
  display_name: dan.lecocq
  login: dan.lecocq
  email: dan.lecocq@kaust.edu.sa
  url: http://dan.lecocq.us/wordpress
author_login: dan.lecocq
author_email: dan.lecocq@kaust.edu.sa
author_url: http://dan.lecocq.us/wordpress
wordpress_id: 972
wordpress_url: http://dan.lecocq.us/wordpress/?p=972
date: '2011-08-05 09:31:54 -0700'
date_gmt: '2011-08-05 16:31:54 -0700'
categories:
- computer science
tags:
- computer science
- macro
- error
comments: []
---
<p>Still porting Linux code to Mac, I've been trying to keep a useful habit: using the #warning and #error macros. This new code is riddled with #ifdef's checking whether or not we're trying to build on a Mac, and using alternatives to the Linux-only system calls, but in parsing these large chunks of code, sometimes I forget what I'm doing. How horrible would it be to accidentally leave empty the Mac-only code block when it's meant to actually do something.</p>
<p>So, whenever I open up one such block, I add a little macro:<br />
<code><br />
#ifndef MAC<br />
&#47;&#47; ... The Linux-only code<br />
&#47;&#47; ... takes up<br />
&#47;&#47; ... a lot<br />
&#47;&#47; ... of space<br />
#else<br />
#error "Don't forget to implement it as Mac!"<br />
#endif<br />
<&#47;code></p>
<p>At least I'll always catch it at compile time, and when I fix&#47;add the Mac-only code, then I can go ahead and remove that macro. It's not that I'm forgetful, but I've shot myself in the foot so much at this point.</p>
